*** Settings ***
Suite Setup       Setup_suite
Default Tags      win
Test Template     CS Template
Resource          ../../resources/keywords.txt

*** Variables ***
${SPACE}          " "

*** Test Cases ***    USERNAME                               PASSWORD                       HOST                                   DB_NAME                                   DSN                                   STREAM_ID                                                             DESCRIPTION                                      STREAM                       BASELINE                                 ARGS                    RETCODE    STATUS
1.Successful with Stream not empty
                      ${_DIMENSIONS_USER}                    ${_DIMENSIONS_PASS}            ${_DIMENSIONS_HOST}                    ${_DIMENSIONS_DB_NAME}                    ${_DIMENSIONS_DSN}                    CS_STREAM_&$PHYS_DATE_YYYYMMDD#&$PHYS_TIME_HHMMSS#                    "1.Successful with Stream not empty"             QLARIUS:MAINLINE_JAVA_STR    ${EMPTY}                                 /ALL                    0          ${ENDED_OK}

2.Successful with Baseline not empty
                      ${SPACE}${_DIMENSIONS_USER}${SPACE}    ${_DIMENSIONS_PASS}            ${SPACE}${_DIMENSIONS_HOST}${SPACE}    ${SPACE}${_DIMENSIONS_DB_NAME}${SPACE}    ${SPACE}${_DIMENSIONS_DSN}${SPACE}    ${SPACE}CS_STREAM_&$PHYS_DATE_YYYYMMDD#&$PHYS_TIME_HHMMSS#${SPACE}    "2.Successful with Baseline not empty"           ${EMPTY}                     ${SPACE}QLARIUS:MAIN_JAVA_TIP${SPACE}    ${SPACE}/ALL${SPACE}    0          ${ENDED_OK}

3.Successful with parameters contain spaces
                      ${_DIMENSIONS_USER}                    ${_DIMENSIONS_PASS}            ${_DIMENSIONS_HOST}                    ${_DIMENSIONS_DB_NAME}                    ${_DIMENSIONS_DSN}                    CS_STREAM_&$PHYS_DATE_YYYYMMDD#&$PHYS_TIME_HHMMSS#                    "3.Successful with parameters contain spaces"    ${EMPTY}                     QLARIUS:MAIN_JAVA_TIP                    /ALL                    0          ${ENDED_OK}

4.Fail with invalid user
                      ${_DIMENSIONS_USER}_invalid            ${_DIMENSIONS_PASS}            ${_DIMENSIONS_HOST}                    ${_DIMENSIONS_DB_NAME}                    ${_DIMENSIONS_DSN}                    CS_STREAM_&$PHYS_DATE_YYYYMMDD#&$PHYS_TIME_HHMMSS#                    4.Fail with invalid user                         QLARIUS:MAINLINE_JAVA_STR    ${EMPTY}                                 /ALL                    1          ${ENDED_NOK}

5.Fail with invalid password
                      ${_DIMENSIONS_USER}                    ${_DIMENSIONS_PASS}_invalid    ${_DIMENSIONS_HOST}                    ${_DIMENSIONS_DB_NAME}                    ${_DIMENSIONS_DSN}                    CS_STREAM_&$PHYS_DATE_YYYYMMDD#&$PHYS_TIME_HHMMSS#                    5.Fail with invalid password                     QLARIUS:MAINLINE_JAVA_STR    ${EMPTY}                                 /ALL                    1          ${ENDED_NOK}

6.Fail with invalid host
                      ${_DIMENSIONS_USER}                    ${_DIMENSIONS_PASS}            ${_DIMENSIONS_HOST}_invalid            ${_DIMENSIONS_DB_NAME}                    ${_DIMENSIONS_DSN}                    CS_STREAM_&$PHYS_DATE_YYYYMMDD#&$PHYS_TIME_HHMMSS#                    6.Fail with invalid host                         QLARIUS:MAINLINE_JAVA_STR    ${EMPTY}                                 /ALL                    1          ${ENDED_NOK}

7.Fail with invalid database name
                      ${_DIMENSIONS_USER}                    ${_DIMENSIONS_PASS}            ${_DIMENSIONS_HOST}                    ${_DIMENSIONS_DB_NAME}_invalid            ${_DIMENSIONS_DSN}                    CS_STREAM_&$PHYS_DATE_YYYYMMDD#&$PHYS_TIME_HHMMSS#                    7.Fail with invalid database name                QLARIUS:MAINLINE_JAVA_STR    ${EMPTY}                                 /ALL                    1          ${ENDED_NOK}

8.Fail with invalid dsn
                      ${_DIMENSIONS_USER}                    ${_DIMENSIONS_PASS}            ${_DIMENSIONS_HOST}                    ${_DIMENSIONS_DB_NAME}                    ${_DIMENSIONS_DSN}_invalid            CS_STREAM_&$PHYS_DATE_YYYYMMDD#&$PHYS_TIME_HHMMSS#                    8.Fail with invalid dsn                          QLARIUS:MAINLINE_JAVA_STR    ${EMPTY}                                 /ALL                    1          ${ENDED_NOK}

9.Fail with invalid Baseline
                      ${_DIMENSIONS_USER}                    ${_DIMENSIONS_PASS}            ${_DIMENSIONS_HOST}                    ${_DIMENSIONS_DB_NAME}                    ${_DIMENSIONS_DSN}                    CS_STREAM_&$PHYS_DATE_YYYYMMDD#&$PHYS_TIME_HHMMSS#                    9.Fail with invalid Baseline                     ${EMPTY}                     INVALID_QLARIUS:MAIN_JAVA_TIP            /ALL                    1          ${ENDED_NOK}

10.Fail with invalid Args
                      ${_DIMENSIONS_USER}                    ${_DIMENSIONS_PASS}            ${_DIMENSIONS_HOST}                    ${_DIMENSIONS_DB_NAME}                    ${_DIMENSIONS_DSN}                    CS_STREAM_&$PHYS_DATE_YYYYMMDD#&$PHYS_TIME_HHMMSS#                    10.Fail with invalid Args                        ${EMPTY}                     INVALID_QLARIUS:MAIN_JAVA_TIP            /INVALID                1          ${ENDED_NOK}

*** Keywords ***
CS Template
    [Arguments]    ${user}    ${pass}    ${host}    ${dbname}    ${dsn}    ${stream_id}
    ...    ${description}    ${stream}    ${baseline}    ${args}    ${returnCode}    ${returnStatus}
    [Documentation]    This template used for testing action PCK.AUTOMIC_DIMENSIONS.PUB.ACTION.CS with inputs
    ...    - ${user}: Username to access Serena Dimensions CM.
    ...    - ${pass}: Password to access Serena Dimensions CM.
    ...    - ${host}: Serena Dimensions CM hostname
    ...    - ${dbname}: Specifies the Serena Dimensions CM database identifier.
    ...    - ${dsn}: Specifies the data source name for connecting to the database.
    ...    - ${stream_id}: Specifies the name of stream.
    ...    - ${description}: Specifies a description for the stream.
    ...    - ${stream}: Optionally specifies the stream on which to base the new stream.
    ...    - ${baseline}: Optionally specifies the Dimensions baseline on which to base the new stream.
    ...    - ${args}: Optionally specify any optional arguments for CS.
    ...    - ${returnCode}: return code of execution
    ...    - ${returnStatus}: return status of execution
    Init Action    ${ACTION_CS}
    Action Set    ${PRT_DIMENSIONS_USERNAME}    ${user}
    Action Set    ${PRT_DIMENSIONS_PASSWORD}    ${pass}
    Action Set    ${PRT_DIMENSIONS_HOST}    ${host}
    Action Set    ${PRT_DIMENSIONS_DBNAME}    ${dbname}
    Action Set    ${PRT_DIMENSIONS_DSN}    ${dsn}
    Action Set    ${PRT_CS_DIMENSIONS_STREAM_ID}    ${stream_id}
    Action Set    ${PRT_CS_DIMENSIONS_DESCRIPTION}    ${description}
    Action Set    ${PRT_CS_DIMENSIONS_STREAM}    ${stream}
    Action Set    ${PRT_CS_DIMENSIONS_BASELINE}    ${baseline}
    Action Set    ${PRT_CS_DIMENSIONS_ARGS}    ${args}
    Action Execute
    Action Report Should Be Found
    Action Return Code Should Be    ${returnCode}
    Action Return Status Should Be    ${returnStatus}

Setup_suite
    [Documentation]    TODO: Write all steps need prepare before testing here
    Log    Start setup testing for CS Action Request Items
